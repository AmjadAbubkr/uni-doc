<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Files Management System</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --info: #1abc9c;
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--primary);
            color: white;
            padding: 20px 0;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--box-shadow);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: var(--secondary);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        nav ul li a:hover, nav ul li a.active {
            background-color: var(--secondary);
        }

        .main-content {
            display: none;
        }

        .main-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-title {
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
        }

        .page-title i {
            margin-right: 10px;
            color: var(--secondary);
        }

        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            margin-bottom: 30px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .card-title {
            font-size: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
        }

        .card-title i {
            margin-right: 10px;
            color: var(--secondary);
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
        }

        .btn i {
            margin-right: 8px;
        }

        .btn-primary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #2980b9;
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-success:hover {
            background-color: #27ae60;
        }

        .btn-danger {
            background-color: var(--accent);
            color: white;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .btn-warning {
            background-color: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background-color: #d35400;
        }

        .btn-info {
            background-color: var(--info);
            color: white;
        }

        .btn-info:hover {
            background-color: #16a085;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--secondary);
            color: var(--secondary);
        }

        .btn-outline:hover {
            background-color: var(--secondary);
            color: white;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--primary);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .upload-area {
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
            position: relative;
        }

        .upload-area:hover {
            border-color: var(--secondary);
            background-color: rgba(52, 152, 219, 0.05);
        }

        .upload-area.active {
            border-color: var(--success);
            background-color: rgba(46, 204, 113, 0.05);
        }

        .upload-area i {
            font-size: 48px;
            color: var(--secondary);
            margin-bottom: 15px;
        }

        .upload-area h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .upload-area p {
            color: #777;
            margin-bottom: 15px;
        }

        #file-input {
            display: none;
        }

        .file-info {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(52, 152, 219, 0.1);
            border-radius: var(--border-radius);
        }

        .file-info.active {
            display: block;
        }

        .file-preview {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .file-icon {
            width: 50px;
            height: 50px;
            background-color: var(--light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .file-icon i {
            font-size: 24px;
            color: var(--secondary);
        }

        .file-details {
            flex: 1;
        }

        .file-name {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .file-size {
            color: #777;
            font-size: 14px;
        }

        .file-actions {
            display: flex;
            gap: 10px;
        }

        .file-actions .btn {
            padding: 8px 12px;
            font-size: 14px;
        }

        .files-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .file-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid #eee;
        }

        .file-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .file-card-header {
            background-color: var(--light);
            padding: 15px;
            display: flex;
            align-items: center;
        }

        .file-card-icon {
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .file-card-icon i {
            font-size: 20px;
            color: var(--secondary);
        }

        .file-card-body {
            padding: 15px;
        }

        .file-card-title {
            font-weight: 500;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-card-desc {
            color: #777;
            font-size: 14px;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .file-card-footer {
            padding: 10px 15px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-card-date {
            color: #777;
            font-size: 12px;
        }

        .file-card-actions {
            display: flex;
            gap: 5px;
        }

        .file-card-actions .btn {
            padding: 5px 8px;
            font-size: 12px;
        }

        .folder-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid #eee;
            cursor: pointer;
        }

        .folder-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .folder-card-header {
            background-color: var(--light);
            padding: 15px;
            display: flex;
            align-items: center;
        }

        .folder-card-icon {
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .folder-card-icon i {
            font-size: 20px;
            color: var(--warning);
        }

        .folder-card-body {
            padding: 15px;
        }

        .folder-card-title {
            font-weight: 500;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .folder-card-count {
            color: #777;
            font-size: 14px;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 15px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
        }

        .breadcrumb-item a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 500;
        }

        .breadcrumb-item i {
            margin: 0 10px;
            color: #777;
            font-size: 14px;
        }

        .breadcrumb-item.active a {
            color: var(--primary);
            cursor: default;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #777;
        }

        .empty-state i {
            font-size: 60px;
            color: #ddd;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 100%;
            max-width: 500px;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 20px;
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 500;
            color: #777;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }

        .tab.active {
            color: var(--secondary);
            border-bottom-color: var(--secondary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .search-bar {
            display: flex;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius) 0 0 var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
        }

        .search-input:focus {
            border-color: var(--secondary);
            outline: none;
        }

        .search-btn {
            padding: 12px 20px;
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-btn:hover {
            background-color: #2980b9;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 20px;
        }

        .status-item {
            display: flex;
            align-items: center;
        }

        .status-item i {
            margin-right: 8px;
            color: var(--secondary);
        }

        .progress-bar {
            height: 6px;
            background-color: #eee;
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: var(--success);
            width: 0;
            transition: width 0.3s ease;
        }

        .context-menu {
            position: absolute;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 100;
            display: none;
        }

        .context-menu.active {
            display: block;
        }

        .context-item {
            padding: 10px 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        .context-item:hover {
            background-color: var(--light);
        }

        .context-item i {
            margin-right: 10px;
            color: #777;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--success);
            color: white;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.active {
            transform: translateY(0);
            opacity: 1;
        }

        .toast i {
            margin-right: 10px;
            font-size: 20px;
        }

        .toast.error {
            background-color: var(--accent);
        }

        .toast.warning {
            background-color: var(--warning);
        }

        .toast.info {
            background-color: var(--info);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }

            nav ul {
                margin-top: 15px;
                justify-content: center;
            }

            nav ul li {
                margin: 0 10px;
            }

            .files-list {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .files-list {
                grid-template-columns: 1fr;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .card-header .btn {
                margin-top: 10px;
                width: 100%;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="header-content container">
            <div class="logo">
                <i class="fas fa-university"></i>
                <span>University Files Management</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-page="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="#" class="nav-link" data-page="files"><i class="fas fa-file"></i> My Files</a></li>
                    <li><a href="#" class="nav-link" data-page="archive"><i class="fas fa-archive"></i> Archive</a></li>
                    <li><a href="#" class="nav-link" data-page="shared"><i class="fas fa-share-alt"></i> Shared</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <!-- Dashboard Page -->
        <div class="main-content active" id="dashboard-page">
            <h1 class="page-title"><i class="fas fa-home"></i> Dashboard</h1>
            
            <div class="status-bar">
                <div class="status-item">
                    <i class="fas fa-file"></i>
                    <span>Total Files: <strong id="total-files">0</strong></span>
                </div>
                <div class="status-item">
                    <i class="fas fa-folder"></i>
                    <span>Total Folders: <strong id="total-folders">0</strong></span>
                </div>
                <div class="status-item">
                    <i class="fas fa-database"></i>
                    <span>Storage Used: <strong id="storage-used">0MB</strong> of 5GB</span>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress" id="storage-progress"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-cloud-upload-alt"></i> Upload Files</h2>
                </div>
                <div class="card-body">
                    <div class="upload-area" id="upload-area">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Drag & Drop your files here</h3>
                        <p>or</p>
                        <button class="btn btn-primary" id="browse-btn"><i class="fas fa-folder-open"></i> Browse Files</button>
                        <input type="file" id="file-input" multiple>
                    </div>
                    
                    <div class="file-info" id="file-info">
                        <div class="file-preview">
                            <div class="file-icon">
                                <i class="fas fa-file"></i>
                            </div>
                            <div class="file-details">
                                <div class="file-name" id="file-name">filename.ext</div>
                                <div class="file-size" id="file-size">0 KB</div>
                            </div>
                            <div class="file-actions">
                                <button class="btn btn-danger btn-sm" id="cancel-upload"><i class="fas fa-times"></i> Cancel</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" id="file-meta" style="display: none;">
                        <label for="file-title">File Name</label>
                        <input type="text" class="form-control" id="file-title" placeholder="Enter file name">
                        
                        <label for="file-description">Description</label>
                        <textarea class="form-control" id="file-description" rows="3" placeholder="Enter file description"></textarea>
                        
                        <label for="file-folder">Folder</label>
                        <select class="form-control" id="file-folder">
                            <option value="">Root Folder</option>
                        </select>
                        
                        <div class="form-group" style="margin-top: 20px;">
                            <button class="btn btn-success" id="save-file"><i class="fas fa-save"></i> Save File</button>
                            <button class="btn btn-outline" id="cancel-save"><i class="fas fa-times"></i> Cancel</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-folder"></i> Recent Folders</h2>
                    <button class="btn btn-primary" id="create-folder-btn"><i class="fas fa-plus"></i> New Folder</button>
                </div>
                <div class="card-body">
                    <div class="files-list" id="folders-list">
                        <!-- Folders will be added here dynamically -->
                        <div class="empty-state">
                            <i class="fas fa-folder-open"></i>
                            <h3>No folders yet</h3>
                            <p>Create your first folder to organize your files</p>
                            <button class="btn btn-primary" id="create-first-folder"><i class="fas fa-plus"></i> Create Folder</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-file"></i> Recent Files</h2>
                </div>
                <div class="card-body">
                    <div class="files-list" id="recent-files">
                        <!-- Files will be added here dynamically -->
                        <div class="empty-state">
                            <i class="fas fa-file-alt"></i>
                            <h3>No recent files</h3>
                            <p>Upload your first file to get started</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Files Page -->
        <div class="main-content" id="files-page">
            <div class="breadcrumb" id="files-breadcrumb">
                <div class="breadcrumb-item">
                    <a href="#" data-folder="root"><i class="fas fa-home"></i> My Files</a>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-file"></i> My Files</h2>
                    <div>
                        <button class="btn btn-primary" id="upload-files-btn"><i class="fas fa-upload"></i> Upload</button>
                        <button class="btn btn-outline" id="create-folder-files-btn"><i class="fas fa-folder-plus"></i> New Folder</button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="search-bar">
                        <input type="text" class="search-input" id="files-search" placeholder="Search files...">
                        <button class="search-btn" id="files-search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    
                    <div class="files-list" id="all-files-list">
                        <!-- All files and folders will be added here dynamically -->
                        <div class="empty-state">
                            <i class="fas fa-file-alt"></i>
                            <h3>No files in this folder</h3>
                            <p>Upload or move files here to get started</p>
                            <button class="btn btn-primary" id="upload-first-file"><i class="fas fa-upload"></i> Upload File</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Archive Page -->
        <div class="main-content" id="archive-page">
            <h1 class="page-title"><i class="fas fa-archive"></i> Archive</h1>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-archive"></i> Archived Files</h2>
                    <div class="tabs">
                        <div class="tab active" data-tab="files">Files</div>
                        <div class="tab" data-tab="folders">Folders</div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="tab-content active" id="archive-files-tab">
                        <div class="search-bar">
                            <input type="text" class="search-input" id="archive-search" placeholder="Search archived files...">
                            <button class="search-btn" id="archive-search-btn"><i class="fas fa-search"></i></button>
                        </div>
                        
                        <div class="files-list" id="archived-files-list">
                            <!-- Archived files will be added here dynamically -->
                            <div class="empty-state">
                                <i class="fas fa-box-open"></i>
                                <h3>No archived files</h3>
                                <p>Files you archive will appear here</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="archive-folders-tab">
                        <div class="files-list" id="archived-folders-list">
                            <!-- Archived folders will be added here dynamically -->
                            <div class="empty-state">
                                <i class="fas fa-folder-minus"></i>
                                <h3>No archived folders</h3>
                                <p>Folders you archive will appear here</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Shared Page -->
        <div class="main-content" id="shared-page">
            <h1 class="page-title"><i class="fas fa-share-alt"></i> Shared Files</h1>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-share-alt"></i> Shared With Me</h2>
                </div>
                <div class="card-body">
                    <div class="files-list" id="shared-files-list">
                        <!-- Shared files will be added here dynamically -->
                        <div class="empty-state">
                            <i class="fas fa-user-friends"></i>
                            <h3>No shared files</h3>
                            <p>Files shared with you will appear here</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-share-square"></i> Shared By Me</h2>
                </div>
                <div class="card-body">
                    <div class="files-list" id="my-shared-files-list">
                        <!-- Files shared by user will be added here dynamically -->
                        <div class="empty-state">
                            <i class="fas fa-share"></i>
                            <h3>No files shared</h3>
                            <p>Files you've shared with others will appear here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Folder Modal -->
    <div class="modal" id="folder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-folder-plus"></i> Create New Folder</h3>
                <button class="modal-close" id="close-folder-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="folder-name">Folder Name</label>
                    <input type="text" class="form-control" id="folder-name" placeholder="Enter folder name">
                </div>
                <div class="form-group">
                    <label for="folder-parent">Parent Folder</label>
                    <select class="form-control" id="folder-parent">
                        <option value="root">Root Folder</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="folder-description">Description (Optional)</label>
                    <textarea class="form-control" id="folder-description" rows="3" placeholder="Enter folder description"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-folder">Cancel</button>
                <button class="btn btn-primary" id="create-folder">Create Folder</button>
            </div>
        </div>
    </div>

    <!-- File Info Modal -->
    <div class="modal" id="file-info-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-file-alt"></i> File Information</h3>
                <button class="modal-close" id="close-file-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="file-preview">
                    <div class="file-icon">
                        <i class="fas fa-file" id="modal-file-icon"></i>
                    </div>
                    <div class="file-details">
                        <div class="file-name" id="modal-file-name">filename.ext</div>
                        <div class="file-size" id="modal-file-size">0 KB</div>
                    </div>
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label for="modal-file-title">File Name</label>
                    <input type="text" class="form-control" id="modal-file-title">
                </div>
                
                <div class="form-group">
                    <label for="modal-file-description">Description</label>
                    <textarea class="form-control" id="modal-file-description" rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="modal-file-folder">Folder</label>
                    <select class="form-control" id="modal-file-folder">
                        <option value="root">Root Folder</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>File Details</label>
                    <div style="background-color: #f8f9fa; padding: 10px; border-radius: var(--border-radius);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Uploaded:</span>
                            <span id="modal-file-date">Jan 1, 2023</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Type:</span>
                            <span id="modal-file-type">Document</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Status:</span>
                            <span id="modal-file-status">Active</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="delete-file-btn"><i class="fas fa-trash"></i> Delete</button>
                <button class="btn btn-warning" id="archive-file-btn"><i class="fas fa-archive"></i> Archive</button>
                <button class="btn btn-info" id="share-file-btn"><i class="fas fa-share"></i> Share</button>
                <button class="btn btn-success" id="save-file-info"><i class="fas fa-save"></i> Save</button>
            </div>
        </div>
    </div>

    <!-- Share File Modal -->
    <div class="modal" id="share-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-share-alt"></i> Share File</h3>
                <button class="modal-close" id="close-share-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="share-email">Email Address</label>
                    <input type="email" class="form-control" id="share-email" placeholder="Enter email address">
                </div>
                <div class="form-group">
                    <label for="share-permission">Permission</label>
                    <select class="form-control" id="share-permission">
                        <option value="view">Can View</option>
                        <option value="edit">Can Edit</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="share-message">Message (Optional)</label>
                    <textarea class="form-control" id="share-message" rows="3" placeholder="Add a message"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-share">Cancel</button>
                <button class="btn btn-primary" id="confirm-share">Share File</button>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="context-menu">
        <div class="context-item" data-action="open"><i class="fas fa-folder-open"></i> Open</div>
        <div class="context-item" data-action="rename"><i class="fas fa-edit"></i> Rename</div>
        <div class="context-item" data-action="download"><i class="fas fa-download"></i> Download</div>
        <div class="context-item" data-action="share"><i class="fas fa-share"></i> Share</div>
        <div class="context-item" data-action="move"><i class="fas fa-folder"></i> Move</div>
        <div class="context-item" data-action="archive"><i class="fas fa-archive"></i> Archive</div>
        <div class="context-item" data-action="delete"><i class="fas fa-trash"></i> Delete</div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Operation completed successfully</span>
    </div>

    <script>
        // Data structure to hold files and folders
        const fileSystem = {
            folders: [
                {
                    id: 'folder1',
                    name: 'Documents',
                    parent: 'root',
                    description: 'Important university documents',
                    createdAt: new Date('2023-01-15'),
                    archived: false
                },
                {
                    id: 'folder2',
                    name: 'Projects',
                    parent: 'root',
                    description: 'Course projects and assignments',
                    createdAt: new Date('2023-02-20'),
                    archived: false
                },
                {
                    id: 'folder3',
                    name: 'Thesis',
                    parent: 'folder2',
                    description: 'Graduation thesis materials',
                    createdAt: new Date('2023-03-10'),
                    archived: false
                },
                {
                    id: 'folder4',
                    name: 'Old Files',
                    parent: 'root',
                    description: 'Archived old files',
                    createdAt: new Date('2022-12-05'),
                    archived: true
                }
            ],
            files: [
                {
                    id: 'file1',
                    name: 'Course Syllabus.pdf',
                    description: 'Introduction to Computer Science syllabus',
                    size: 2500000,
                    type: 'pdf',
                    folder: 'folder1',
                    createdAt: new Date('2023-01-20'),
                    archived: false
                },
                {
                    id: 'file2',
                    name: 'Research Paper.docx',
                    description: 'Final draft of research paper',
                    size: 1800000,
                    type: 'docx',
                    folder: 'folder2',
                    createdAt: new Date('2023-02-25'),
                    archived: false
                },
                {
                    id: 'file3',
                    name: 'Presentation.pptx',
                    description: 'Group project presentation',
                    size: 3500000,
                    type: 'pptx',
                    folder: 'folder2',
                    createdAt: new Date('2023-03-05'),
                    archived: false
                },
                {
                    id: 'file4',
                    name: 'Notes.txt',
                    description: 'Lecture notes from week 1',
                    size: 120000,
                    type: 'txt',
                    folder: 'root',
                    createdAt: new Date('2023-01-10'),
                    archived: false
                },
                {
                    id: 'file5',
                    name: 'Old Assignment.pdf',
                    description: 'Completed assignment from last semester',
                    size: 1500000,
                    type: 'pdf',
                    folder: 'folder4',
                    createdAt: new Date('2022-11-15'),
                    archived: true
                }
            ],
            shared: [
                {
                    fileId: 'file2',
                    sharedWith: 'professor@university.edu',
                    permission: 'view',
                    sharedAt: new Date('2023-03-01')
                }
            ]
        };

        // Current state
        let currentState = {
            currentPage: 'dashboard',
            currentFolder: 'root',
            selectedFile: null,
            selectedFolder: null,
            uploadProgress: 0,
            dragOver: false
        };

        // DOM Elements
        const pages = {
            dashboard: document.getElementById('dashboard-page'),
            files: document.getElementById('files-page'),
            archive: document.getElementById('archive-page'),
            shared: document.getElementById('shared-page')
        };

        const navLinks = document.querySelectorAll('.nav-link');
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('file-input');
        const browseBtn = document.getElementById('browse-btn');
        const fileInfo = document.getElementById('file-info');
        const fileName = document.getElementById('file-name');
        const fileSize = document.getElementById('file-size');
        const fileMeta = document.getElementById('file-meta');
        const saveFileBtn = document.getElementById('save-file');
        const cancelSaveBtn = document.getElementById('cancel-save');
        const cancelUploadBtn = document.getElementById('cancel-upload');
        const foldersList = document.getElementById('folders-list');
        const recentFiles = document.getElementById('recent-files');
        const allFilesList = document.getElementById('all-files-list');
        const archivedFilesList = document.getElementById('archived-files-list');
        const archivedFoldersList = document.getElementById('archived-folders-list');
        const sharedFilesList = document.getElementById('shared-files-list');
        const mySharedFilesList = document.getElementById('my-shared-files-list');
        const filesBreadcrumb = document.getElementById('files-breadcrumb');
        const folderModal = document.getElementById('folder-modal');
        const createFolderBtn = document.getElementById('create-folder-btn');
        const createFirstFolderBtn = document.getElementById('create-first-folder');
        const closeFolderModal = document.getElementById('close-folder-modal');
        const cancelFolderBtn = document.getElementById('cancel-folder');
        const createFolderBtnModal = document.getElementById('create-folder');
        const folderNameInput = document.getElementById('folder-name');
        const folderParentSelect = document.getElementById('folder-parent');
        const fileInfoModal = document.getElementById('file-info-modal');
        const closeFileModal = document.getElementById('close-file-modal');
        const modalFileName = document.getElementById('modal-file-name');
        const modalFileSize = document.getElementById('modal-file-size');
        const modalFileTitle = document.getElementById('modal-file-title');
        const modalFileDescription = document.getElementById('modal-file-description');
        const modalFileFolder = document.getElementById('modal-file-folder');
        const modalFileDate = document.getElementById('modal-file-date');
        const modalFileType = document.getElementById('modal-file-type');
        const modalFileStatus = document.getElementById('modal-file-status');
        const modalFileIcon = document.getElementById('modal-file-icon');
        const saveFileInfoBtn = document.getElementById('save-file-info');
        const deleteFileBtn = document.getElementById('delete-file-btn');
        const archiveFileBtn = document.getElementById('archive-file-btn');
        const shareFileBtn = document.getElementById('share-file-btn');
        const shareModal = document.getElementById('share-modal');
        const closeShareModal = document.getElementById('close-share-modal');
        const cancelShareBtn = document.getElementById('cancel-share');
        const confirmShareBtn = document.getElementById('confirm-share');
        const contextMenu = document.getElementById('context-menu');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const totalFilesEl = document.getElementById('total-files');
        const totalFoldersEl = document.getElementById('total-folders');
        const storageUsedEl = document.getElementById('storage-used');
        const storageProgress = document.getElementById('storage-progress');
        const uploadFilesBtn = document.getElementById('upload-files-btn');
        const createFolderFilesBtn = document.getElementById('create-folder-files-btn');
        const uploadFirstFileBtn = document.getElementById('upload-first-file');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // Helper functions
        function formatBytes(bytes, decimals = 2) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const dm = decimals < 0 ? 0 : decimals;
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
        }

        function formatDate(date) {
            return new Date(date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        function getFileIcon(type) {
            const icons = {
                pdf: 'file-pdf',
                docx: 'file-word',
                xlsx: 'file-excel',
                pptx: 'file-powerpoint',
                txt: 'file-alt',
                jpg: 'file-image',
                png: 'file-image',
                zip: 'file-archive'
            };
            return icons[type] || 'file';
        }

        function showToast(message, type = 'success') {
            toast.className = 'toast';
            toast.classList.add(type);
            toast.classList.add('active');
            toastMessage.textContent = message;
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        function updateStorageInfo() {
            const totalFiles = fileSystem.files.filter(f => !f.archived).length;
            const totalFolders = fileSystem.folders.filter(f => !f.archived).length;
            const totalSize = fileSystem.files.reduce((sum, file) => sum + file.size, 0);
            const storageLimit = 5 * 1024 * 1024 * 1024; // 5GB
            const percentage = Math.min((totalSize / storageLimit) * 100, 100);
            
            totalFilesEl.textContent = totalFiles;
            totalFoldersEl.textContent = totalFolders;
            storageUsedEl.textContent = formatBytes(totalSize);
            storageProgress.style.width = `${percentage}%`;
        }

        function getFolderPath(folderId) {
            if (folderId === 'root') return [];
            
            const path = [];
            let currentId = folderId;
            
            while (currentId && currentId !== 'root') {
                const folder = fileSystem.folders.find(f => f.id === currentId);
                if (folder) {
                    path.unshift(folder);
                    currentId = folder.parent;
                } else {
                    break;
                }
            }
            
            return path;
        }

        function updateBreadcrumb(folderId) {
            filesBreadcrumb.innerHTML = '';
            
            const rootItem = document.createElement('div');
            rootItem.className = 'breadcrumb-item';
            rootItem.innerHTML = `<a href="#" data-folder="root"><i class="fas fa-home"></i> My Files</a>`;
            filesBreadcrumb.appendChild(rootItem);
            
            if (folderId !== 'root') {
                const path = getFolderPath(folderId);
                
                path.forEach(folder => {
                    const separator = document.createElement('div');
                    separator.className = 'breadcrumb-item';
                    separator.innerHTML = `<i class="fas fa-chevron-right"></i>`;
                    filesBreadcrumb.appendChild(separator);
                    
                    const item = document.createElement('div');
                    item.className = 'breadcrumb-item';
                    item.innerHTML = `<a href="#" data-folder="${folder.id}">${folder.name}</a>`;
                    filesBreadcrumb.appendChild(item);
                });
            }
        }

        function populateFolderSelect(selectElement, currentFolder = 'root') {
            selectElement.innerHTML = '<option value="root">Root Folder</option>';
            
            const nonArchivedFolders = fileSystem.folders.filter(f => !f.archived);
            
            nonArchivedFolders.forEach(folder => {
                const option = document.createElement('option');
                option.value = folder.id;
                option.textContent = folder.name;
                selectElement.appendChild(option);
            });
            
            if (currentFolder) {
                selectElement.value = currentFolder;
            }
        }

        // Render functions
        function renderRecentFolders() {
            const recentFolders = fileSystem.folders
                .filter(f => !f.archived && f.parent === 'root')
                .sort((a, b) => b.createdAt - a.createdAt)
                .slice(0, 4);
            
            if (recentFolders.length === 0) {
                foldersList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-folder-open"></i>
                        <h3>No folders yet</h3>
                        <p>Create your first folder to organize your files</p>
                        <button class="btn btn-primary" id="create-first-folder"><i class="fas fa-plus"></i> Create Folder</button>
                    </div>
                `;
                return;
            }
            
            foldersList.innerHTML = '';
            
            recentFolders.forEach(folder => {
                const folderCard = document.createElement('div');
                folderCard.className = 'folder-card';
                folderCard.dataset.id = folder.id;
                
                const fileCount = fileSystem.files.filter(f => f.folder === folder.id && !f.archived).length;
                
                folderCard.innerHTML = `
                    <div class="folder-card-header">
                        <div class="folder-card-icon">
                            <i class="fas fa-folder"></i>
                        </div>
                        <div class="folder-card-body">
                            <div class="folder-card-title">${folder.name}</div>
                            <div class="folder-card-count">${fileCount} ${fileCount === 1 ? 'file' : 'files'}</div>
                        </div>
                    </div>
                `;
                
                foldersList.appendChild(folderCard);
            });
        }

        function renderRecentFiles() {
            const recentFilesList = fileSystem.files
                .filter(f => !f.archived)
                .sort((a, b) => b.createdAt - a.createdAt)
                .slice(0, 6);
            
            if (recentFilesList.length === 0) {
                recentFiles.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-file-alt"></i>
                        <h3>No recent files</h3>
                        <p>Upload your first file to get started</p>
                    </div>
                `;
                return;
            }
            
            recentFiles.innerHTML = '';
            
            recentFilesList.forEach(file => {
                const folder = file.folder ? fileSystem.folders.find(f => f.id === file.folder) : null;
                
                const fileCard = document.createElement('div');
                fileCard.className = 'file-card';
                fileCard.dataset.id = file.id;
                
                fileCard.innerHTML = `
                    <div class="file-card-header">
                        <div class="file-card-icon">
                            <i class="fas fa-${getFileIcon(file.type)}"></i>
                        </div>
                        <div class="file-card-body">
                            <div class="file-card-title">${file.name}</div>
                            <div class="file-card-desc">${file.description || 'No description'}</div>
                        </div>
                    </div>
                    <div class="file-card-footer">
                        <div class="file-card-date">${formatDate(file.createdAt)}</div>
                        <div class="file-card-actions">
                            <button class="btn btn-outline btn-sm" data-action="info"><i class="fas fa-info-circle"></i></button>
                        </div>
                    </div>
                `;
                
                recentFiles.appendChild(fileCard);
            });
        }

        function renderFilesInFolder(folderId = 'root') {
            const filesInFolder = fileSystem.files
                .filter(f => f.folder === folderId && !f.archived)
                .sort((a, b) => b.createdAt - a.createdAt);
            
            const foldersInFolder = fileSystem.folders
                .filter(f => f.parent === folderId && !f.archived)
                .sort((a, b) => b.createdAt - a.createdAt);
            
            if (filesInFolder.length === 0 && foldersInFolder.length === 0) {
                allFilesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-file-alt"></i>
                        <h3>No files in this folder</h3>
                        <p>Upload or move files here to get started</p>
                        <button class="btn btn-primary" id="upload-first-file"><i class="fas fa-upload"></i> Upload File</button>
                    </div>
                `;
                return;
            }
            
            allFilesList.innerHTML = '';
            
            // Render folders first
            foldersInFolder.forEach(folder => {
                const fileCount = fileSystem.files.filter(f => f.folder === folder.id && !f.archived).length;
                
                const folderCard = document.createElement('div');
                folderCard.className = 'folder-card';
                folderCard.dataset.id = folder.id;
                
                folderCard.innerHTML = `
                    <div class="folder-card-header">
                        <div class="folder-card-icon">
                            <i class="fas fa-folder"></i>
                        </div>
                        <div class="folder-card-body">
                            <div class="folder-card-title">${folder.name}</div>
                            <div class="folder-card-count">${fileCount} ${fileCount === 1 ? 'file' : 'files'}</div>
                        </div>
                    </div>
                `;
                
                allFilesList.appendChild(folderCard);
            });
            
            // Then render files
            filesInFolder.forEach(file => {
                const fileCard = document.createElement('div');
                fileCard.className = 'file-card';
                fileCard.dataset.id = file.id;
                
                fileCard.innerHTML = `
                    <div class="file-card-header">
                        <div class="file-card-icon">
                            <i class="fas fa-${getFileIcon(file.type)}"></i>
                        </div>
                        <div class="file-card-body">
                            <div class="file-card-title">${file.name}</div>
                            <div class="file-card-desc">${file.description || 'No description'}</div>
                        </div>
                    </div>
                    <div class="file-card-footer">
                        <div class="file-card-date">${formatDate(file.createdAt)}</div>
                        <div class="file-card-actions">
                            <button class="btn btn-outline btn-sm" data-action="info"><i class="fas fa-info-circle"></i></button>
                        </div>
                    </div>
                `;
                
                allFilesList.appendChild(fileCard);
            });
        }

        function renderArchivedFiles() {
            const archivedFiles = fileSystem.files
                .filter(f => f.archived)
                .sort((a, b) => b.createdAt - a.createdAt);
            
            if (archivedFiles.length === 0) {
                archivedFilesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-box-open"></i>
                        <h3>No archived files</h3>
                        <p>Files you archive will appear here</p>
                    </div>
                `;
                return;
            }
            
            archivedFilesList.innerHTML = '';
            
            archivedFiles.forEach(file => {
                const folder = file.folder ? fileSystem.folders.find(f => f.id === file.folder) : null;
                
                const fileCard = document.createElement('div');
                fileCard.className = 'file-card';
                fileCard.dataset.id = file.id;
                
                fileCard.innerHTML = `
                    <div class="file-card-header">
                        <div class="file-card-icon">
                            <i class="fas fa-${getFileIcon(file.type)}"></i>
                        </div>
                        <div class="file-card-body">
                            <div class="file-card-title">${file.name}</div>
                            <div class="file-card-desc">${file.description || 'No description'}</div>
                        </div>
                    </div>
                    <div class="file-card-footer">
                        <div class="file-card-date">${formatDate(file.createdAt)}</div>
                        <div class="file-card-actions">
                            <button class="btn btn-outline btn-sm" data-action="restore"><i class="fas fa-trash-restore"></i></button>
                            <button class="btn btn-outline btn-sm" data-action="info"><i class="fas fa-info-circle"></i></button>
                        </div>
                    </div>
                `;
                
                archivedFilesList.appendChild(fileCard);
            });
        }

        function renderArchivedFolders() {
            const archivedFolders = fileSystem.folders
                .filter(f => f.archived)
                .sort((a, b) => b.createdAt - a.createdAt);
            
            if (archivedFolders.length === 0) {
                archivedFoldersList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-folder-minus"></i>
                        <h3>No archived folders</h3>
                        <p>Folders you archive will appear here</p>
                    </div>
                `;
                return;
            }
            
            archivedFoldersList.innerHTML = '';
            
            archivedFolders.forEach(folder => {
                const fileCount = fileSystem.files.filter(f => f.folder === folder.id && f.archived).length;
                
                const folderCard = document.createElement('div');
                folderCard.className = 'folder-card';
                folderCard.dataset.id = folder.id;
                
                folderCard.innerHTML = `
                    <div class="folder-card-header">
                        <div class="folder-card-icon">
                            <i class="fas fa-folder"></i>
                        </div>
                        <div class="folder-card-body">
                            <div class="folder-card-title">${folder.name}</div>
                            <div class="folder-card-count">${fileCount} ${fileCount === 1 ? 'file' : 'files'}</div>
                        </div>
                    </div>
                    <div class="file-card-footer">
                        <div class="file-card-actions">
                            <button class="btn btn-outline btn-sm" data-action="restore"><i class="fas fa-trash-restore"></i></button>
                        </div>
                    </div>
                `;
                
                archivedFoldersList.appendChild(folderCard);
            });
        }

        function renderSharedFiles() {
            // Shared with me (simulated - in a real app this would come from the server)
            const sharedWithMe = fileSystem.shared.map(share => {
                const file = fileSystem.files.find(f => f.id === share.fileId);
                return { ...file, sharedBy: 'professor@university.edu', permission: share.permission };
            }).filter(Boolean);
            
            if (sharedWithMe.length === 0) {
                sharedFilesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-user-friends"></i>
                        <h3>No shared files</h3>
                        <p>Files shared with you will appear here</p>
                    </div>
                `;
            } else {
                sharedFilesList.innerHTML = '';
                
                sharedWithMe.forEach(file => {
                    const fileCard = document.createElement('div');
                    fileCard.className = 'file-card';
                    fileCard.dataset.id = file.id;
                    
                    fileCard.innerHTML = `
                        <div class="file-card-header">
                            <div class="file-card-icon">
                                <i class="fas fa-${getFileIcon(file.type)}"></i>
                            </div>
                            <div class="file-card-body">
                                <div class="file-card-title">${file.name}</div>
                                <div class="file-card-desc">Shared by ${file.sharedBy} (${file.permission === 'view' ? 'Can View' : 'Can Edit'})</div>
                            </div>
                        </div>
                        <div class="file-card-footer">
                            <div class="file-card-date">${formatDate(file.createdAt)}</div>
                            <div class="file-card-actions">
                                <button class="btn btn-outline btn-sm" data-action="info"><i class="fas fa-info-circle"></i></button>
                            </div>
                        </div>
                    `;
                    
                    sharedFilesList.appendChild(fileCard);
                });
            }
            
            // Shared by me
            const sharedByMe = fileSystem.shared.map(share => {
                const file = fileSystem.files.find(f => f.id === share.fileId);
                return { ...file, sharedWith: share.sharedWith, permission: share.permission };
            }).filter(Boolean);
            
            if (sharedByMe.length === 0) {
                mySharedFilesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-share"></i>
                        <h3>No files shared</h3>
                        <p>Files you've shared with others will appear here</p>
                    </div>
                `;
            } else {
                mySharedFilesList.innerHTML = '';
                
                sharedByMe.forEach(file => {
                    const fileCard = document.createElement('div');
                    fileCard.className = 'file-card';
                    fileCard.dataset.id = file.id;
                    
                    fileCard.innerHTML = `
                        <div class="file-card-header">
                            <div class="file-card-icon">
                                <i class="fas fa-${getFileIcon(file.type)}"></i>
                            </div>
                            <div class="file-card-body">
                                <div class="file-card-title">${file.name}</div>
                                <div class="file-card-desc">Shared with ${file.sharedWith} (${file.permission === 'view' ? 'Can View' : 'Can Edit'})</div>
                            </div>
                        </div>
                        <div class="file-card-footer">
                            <div class="file-card-date">${formatDate(file.createdAt)}</div>
                            <div class="file-card-actions">
                                <button class="btn btn-outline btn-sm" data-action="unshare"><i class="fas fa-share-slash"></i></button>
                                <button class="btn btn-outline btn-sm" data-action="info"><i class="fas fa-info-circle"></i></button>
                            </div>
                        </div>
                    `;
                    
                    mySharedFilesList.appendChild(fileCard);
                });
            }
        }

        function renderFileInfoModal(fileId) {
            const file = fileSystem.files.find(f => f.id === fileId);
            if (!file) return;
            
            const folder = file.folder ? fileSystem.folders.find(f => f.id === file.folder) : null;
            
            modalFileName.textContent = file.name;
            modalFileSize.textContent = formatBytes(file.size);
            modalFileTitle.value = file.name;
            modalFileDescription.value = file.description || '';
            modalFileDate.textContent = formatDate(file.createdAt);
            modalFileType.textContent = file.type.toUpperCase();
            modalFileStatus.textContent = file.archived ? 'Archived' : 'Active';
            modalFileIcon.className = `fas fa-${getFileIcon(file.type)}`;
            
            populateFolderSelect(modalFileFolder, file.folder || 'root');
            
            if (file.archived) {
                archiveFileBtn.innerHTML = '<i class="fas fa-trash-restore"></i> Restore';
                archiveFileBtn.className = 'btn btn-success';
            } else {
                archiveFileBtn.innerHTML = '<i class="fas fa-archive"></i> Archive';
                archiveFileBtn.className = 'btn btn-warning';
            }
            
            currentState.selectedFile = fileId;
            fileInfoModal.classList.add('active');
        }

        // Event handlers
        function handleNavClick(e) {
            e.preventDefault();
            const page = e.target.dataset.page;
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.page === page) {
                    link.classList.add('active');
                }
            });
            
            Object.values(pages).forEach(p => p.classList.remove('active'));
            pages[page].classList.add('active');
            currentState.currentPage = page;
            
            // Update the specific page content
            if (page === 'files') {
                renderFilesInFolder(currentState.currentFolder);
                updateBreadcrumb(currentState.currentFolder);
            } else if (page === 'archive') {
                renderArchivedFiles();
                renderArchivedFolders();
            } else if (page === 'shared') {
                renderSharedFiles();
            } else if (page === 'dashboard') {
                renderRecentFolders();
                renderRecentFiles();
            }
        }

        function handleFileInputChange(e) {
            const files = e.target.files;
            if (files.length === 0) return;
            
            const file = files[0];
            const fileType = file.name.split('.').pop().toLowerCase();
            
            fileName.textContent = file.name;
            fileSize.textContent = formatBytes(file.size);
            
            uploadArea.classList.add('active');
            fileInfo.classList.add('active');
            fileMeta.style.display = 'block';
            
            // Simulate upload progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                }
                
                // Update progress (visual only in this demo)
            }, 200);
            
            // Store the file info for later saving
            currentState.uploadingFile = {
                name: file.name,
                size: file.size,
                type: fileType
            };
            
            // Populate folder select
            populateFolderSelect(document.getElementById('file-folder'));
        }

        function handleSaveFile() {
            const title = document.getElementById('file-title').value || currentState.uploadingFile.name;
            const description = document.getElementById('file-description').value;
            const folder = document.getElementById('file-folder').value || 'root';
            
            // In a real app, this would upload to a server
            const newFile = {
                id: 'file' + Date.now(),
                name: title,
                description: description,
                size: currentState.uploadingFile.size,
                type: currentState.uploadingFile.type,
                folder: folder,
                createdAt: new Date(),
                archived: false
            };
            
            fileSystem.files.push(newFile);
            
            // Reset upload area
            uploadArea.classList.remove('active');
            fileInfo.classList.remove('active');
            fileMeta.style.display = 'none';
            fileInput.value = '';
            document.getElementById('file-title').value = '';
            document.getElementById('file-description').value = '';
            
            // Update UI
            if (currentState.currentPage === 'files') {
                renderFilesInFolder(currentState.currentFolder);
            } else if (currentState.currentPage === 'dashboard') {
                renderRecentFiles();
            }
            
            updateStorageInfo();
            showToast('File uploaded successfully');
        }

        function handleCancelSave() {
            uploadArea.classList.remove('active');
            fileInfo.classList.remove('active');
            fileMeta.style.display = 'none';
            fileInput.value = '';
            delete currentState.uploadingFile;
        }

        function handleCancelUpload() {
            uploadArea.classList.remove('active');
            fileInfo.classList.remove('active');
            fileMeta.style.display = 'none';
            fileInput.value = '';
            delete currentState.uploadingFile;
        }

        function handleCreateFolder() {
            folderNameInput.value = '';
            folderParentSelect.innerHTML = '<option value="root">Root Folder</option>';
            
            // Populate parent folder select
            const nonArchivedFolders = fileSystem.folders.filter(f => !f.archived);
            nonArchivedFolders.forEach(folder => {
                const option = document.createElement('option');
                option.value = folder.id;
                option.textContent = folder.name;
                folderParentSelect.appendChild(option);
            });
            
            folderModal.classList.add('active');
        }

        function handleConfirmCreateFolder() {
            const name = folderNameInput.value.trim();
            const parent = folderParentSelect.value || 'root';
            const description = document.getElementById('folder-description').value;
            
            if (!name) {
                showToast('Please enter a folder name', 'error');
                return;
            }
            
            const newFolder = {
                id: 'folder' + Date.now(),
                name: name,
                parent: parent,
                description: description,
                createdAt: new Date(),
                archived: false
            };
            
            fileSystem.folders.push(newFolder);
            folderModal.classList.remove('active');
            
            // Update UI
            if (currentState.currentPage === 'files') {
                renderFilesInFolder(currentState.currentFolder);
            } else if (currentState.currentPage === 'dashboard') {
                renderRecentFolders();
            }
            
            updateStorageInfo();
            showToast('Folder created successfully');
        }

        function handleBreadcrumbClick(e) {
            e.preventDefault();
            if (e.target.tagName === 'A') {
                const folderId = e.target.dataset.folder;
                currentState.currentFolder = folderId;
                renderFilesInFolder(folderId);
                updateBreadcrumb(folderId);
            }
        }

        function handleFolderClick(e) {
            const folderCard = e.target.closest('.folder-card');
            if (!folderCard) return;
            
            const folderId = folderCard.dataset.id;
            currentState.currentFolder = folderId;
            renderFilesInFolder(folderId);
            updateBreadcrumb(folderId);
        }

        function handleFileAction(e) {
            if (e.target.tagName !== 'BUTTON') return;
            
            const action = e.target.dataset.action;
            const fileCard = e.target.closest('.file-card, .folder-card');
            if (!fileCard) return;
            
            const fileId = fileCard.dataset.id;
            
            if (action === 'info') {
                renderFileInfoModal(fileId);
            } else if (action === 'restore') {
                // Restore from archive
                const file = fileSystem.files.find(f => f.id === fileId);
                if (file) file.archived = false;
                
                const folder = fileSystem.folders.find(f => f.id === fileId);
                if (folder) folder.archived = false;
                
                renderArchivedFiles();
                renderArchivedFolders();
                updateStorageInfo();
                showToast('Item restored successfully');
            } else if (action === 'unshare') {
                // Unshare file
                const index = fileSystem.shared.findIndex(s => s.fileId === fileId);
                if (index !== -1) {
                    fileSystem.shared.splice(index, 1);
                    renderSharedFiles();
                    showToast('File unshared successfully');
                }
            }
        }

        function handleSaveFileInfo() {
            const file = fileSystem.files.find(f => f.id === currentState.selectedFile);
            if (!file) return;
            
            file.name = modalFileTitle.value;
            file.description = modalFileDescription.value;
            file.folder = modalFileFolder.value || 'root';
            
            fileInfoModal.classList.remove('active');
            
            // Update UI
            if (currentState.currentPage === 'files') {
                renderFilesInFolder(currentState.currentFolder);
            } else if (currentState.currentPage === 'dashboard') {
                renderRecentFiles();
            } else if (currentState.currentPage === 'archive') {
                renderArchivedFiles();
            } else if (currentState.currentPage === 'shared') {
                renderSharedFiles();
            }
            
            showToast('File updated successfully');
        }

        function handleDeleteFile() {
            const index = fileSystem.files.findIndex(f => f.id === currentState.selectedFile);
            if (index !== -1) {
                fileSystem.files.splice(index, 1);
                fileInfoModal.classList.remove('active');
                
                // Update UI
                if (currentState.currentPage === 'files') {
                    renderFilesInFolder(currentState.currentFolder);
                } else if (currentState.currentPage === 'dashboard') {
                    renderRecentFiles();
                } else if (currentState.currentPage === 'archive') {
                    renderArchivedFiles();
                } else if (currentState.currentPage === 'shared') {
                    renderSharedFiles();
                }
                
                updateStorageInfo();
                showToast('File deleted successfully');
            }
        }

        function handleArchiveFile() {
            const file = fileSystem.files.find(f => f.id === currentState.selectedFile);
            const folder = fileSystem.folders.find(f => f.id === currentState.selectedFile);
            
            if (file) {
                file.archived = !file.archived;
                fileInfoModal.classList.remove('active');
                
                if (currentState.currentPage === 'files') {
                    renderFilesInFolder(currentState.currentFolder);
                } else if (currentState.currentPage === 'dashboard') {
                    renderRecentFiles();
                } else if (currentState.currentPage === 'archive') {
                    renderArchivedFiles();
                }
                
                updateStorageInfo();
                showToast(file.archived ? 'File archived successfully' : 'File restored successfully');
            } else if (folder) {
                folder.archived = !folder.archived;
                fileInfoModal.classList.remove('active');
                
                if (currentState.currentPage === 'files') {
                    renderFilesInFolder(currentState.currentFolder);
                } else if (currentState.currentPage === 'dashboard') {
                    renderRecentFolders();
                } else if (currentState.currentPage === 'archive') {
                    renderArchivedFolders();
                }
                
                updateStorageInfo();
                showToast(folder.archived ? 'Folder archived successfully' : 'Folder restored successfully');
            }
        }

        function handleShareFile() {
            shareModal.classList.add('active');
        }

        function handleConfirmShare() {
            const email = document.getElementById('share-email').value;
            const permission = document.getElementById('share-permission').value;
            const message = document.getElementById('share-message').value;
            
            if (!email) {
                showToast('Please enter an email address', 'error');
                return;
            }
            
            // In a real app, this would send to a server
            const newShare = {
                fileId: currentState.selectedFile,
                sharedWith: email,
                permission: permission,
                sharedAt: new Date()
            };
            
            fileSystem.shared.push(newShare);
            shareModal.classList.remove('active');
            
            // Update UI
            renderSharedFiles();
            showToast('File shared successfully');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadArea.classList.add('active');
            currentState.dragOver = true;
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.stopPropagation();
            if (!currentState.uploadingFile) {
                uploadArea.classList.remove('active');
            }
            currentState.dragOver = false;
        }

        function handleDrop(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadArea.classList.remove('active');
            currentState.dragOver = false;
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                const event = new Event('change');
                fileInput.dispatchEvent(event);
            }
        }

        function handleTabClick(e) {
            const tabId = e.target.dataset.tab;
            
            tabs.forEach(tab => tab.classList.remove('active'));
            e.target.classList.add('active');
            
            tabContents.forEach(content => content.classList.remove('active'));
            document.getElementById(`archive-${tabId}-tab`).classList.add('active');
        }

        function handleContextMenu(e) {
            e.preventDefault();
            
            const fileCard = e.target.closest('.file-card, .folder-card');
            if (!fileCard) return;
            
            currentState.selectedFile = fileCard.dataset.id;
            
            contextMenu.style.display = 'block';
            contextMenu.style.left = `${e.pageX}px`;
            contextMenu.style.top = `${e.pageY}px`;
        }

        function handleContextAction(e) {
            const action = e.target.dataset.action;
            if (!action) return;
            
            contextMenu.style.display = 'none';
            
            if (action === 'open') {
                const file = fileSystem.files.find(f => f.id === currentState.selectedFile);
                if (file) {
                    renderFileInfoModal(file.id);
                } else {
                    const folder = fileSystem.folders.find(f => f.id === currentState.selectedFile);
                    if (folder) {
                        currentState.currentFolder = folder.id;
                        renderFilesInFolder(folder.id);
                        updateBreadcrumb(folder.id);
                        // Switch to files page if not already there
                        if (currentState.currentPage !== 'files') {
                            document.querySelector(`.nav-link[data-page="files"]`).click();
                        }
                    }
                }
            } else if (action === 'rename') {
                const file = fileSystem.files.find(f => f.id === currentState.selectedFile);
                if (file) {
                    renderFileInfoModal(file.id);
                    modalFileTitle.focus();
                }
            } else if (action === 'download') {
                showToast('Download started', 'info');
            } else if (action === 'share') {
                handleShareFile();
            } else if (action === 'move') {
                const file = fileSystem.files.find(f => f.id === currentState.selectedFile);
                if (file) {
                    renderFileInfoModal(file.id);
                    modalFileFolder.focus();
                }
            } else if (action === 'archive') {
                const file = fileSystem.files.find(f => f.id === currentState.selectedFile);
                const folder = fileSystem.folders.find(f => f.id === currentState.selectedFile);
                
                if (file) {
                    file.archived = true;
                    if (currentState.currentPage === 'files') {
                        renderFilesInFolder(currentState.currentFolder);
                    }
                    showToast('File archived successfully');
                } else if (folder) {
                    folder.archived = true;
                    if (currentState.currentPage === 'files') {
                        renderFilesInFolder(currentState.currentFolder);
                    }
                    showToast('Folder archived successfully');
                }
            } else if (action === 'delete') {
                if (confirm('Are you sure you want to delete this item?')) {
                    const fileIndex = fileSystem.files.findIndex(f => f.id === currentState.selectedFile);
                    const folderIndex = fileSystem.folders.findIndex(f => f.id === currentState.selectedFile);
                    
                    if (fileIndex !== -1) {
                        fileSystem.files.splice(fileIndex, 1);
                        if (currentState.currentPage === 'files') {
                            renderFilesInFolder(currentState.currentFolder);
                        }
                        showToast('File deleted successfully');
                    } else if (folderIndex !== -1) {
                        fileSystem.folders.splice(folderIndex, 1);
                        if (currentState.currentPage === 'files') {
                            renderFilesInFolder(currentState.currentFolder);
                        }
                        showToast('Folder deleted successfully');
                    }
                }
            }
        }

        // Event listeners
        navLinks.forEach(link => link.addEventListener('click', handleNavClick));
        fileInput.addEventListener('change', handleFileInputChange);
        browseBtn.addEventListener('click', () => fileInput.click());
        saveFileBtn.addEventListener('click', handleSaveFile);
        cancelSaveBtn.addEventListener('click', handleCancelSave);
        cancelUploadBtn.addEventListener('click', handleCancelUpload);
        createFolderBtn.addEventListener('click', handleCreateFolder);
        createFirstFolderBtn?.addEventListener('click', handleCreateFolder);
        closeFolderModal.addEventListener('click', () => folderModal.classList.remove('active'));
        cancelFolderBtn.addEventListener('click', () => folderModal.classList.remove('active'));
        createFolderBtnModal.addEventListener('click', handleConfirmCreateFolder);
        filesBreadcrumb.addEventListener('click', handleBreadcrumbClick);
        foldersList.addEventListener('click', handleFolderClick);
        allFilesList.addEventListener('click', handleFolderClick);
        allFilesList.addEventListener('click', handleFileAction);
        recentFiles.addEventListener('click', handleFileAction);
        archivedFilesList.addEventListener('click', handleFileAction);
        archivedFoldersList.addEventListener('click', handleFileAction);
        sharedFilesList.addEventListener('click', handleFileAction);
        mySharedFilesList.addEventListener('click', handleFileAction);
        closeFileModal.addEventListener('click', () => fileInfoModal.classList.remove('active'));
        saveFileInfoBtn.addEventListener('click', handleSaveFileInfo);
        deleteFileBtn.addEventListener('click', handleDeleteFile);
        archiveFileBtn.addEventListener('click', handleArchiveFile);
        shareFileBtn.addEventListener('click', handleShareFile);
        closeShareModal.addEventListener('click', () => shareModal.classList.remove('active'));
        cancelShareBtn.addEventListener('click', () => shareModal.classList.remove('active'));
        confirmShareBtn.addEventListener('click', handleConfirmShare);
        uploadArea.addEventListener('dragover', handleDragOver);
        uploadArea.addEventListener('dragleave', handleDragLeave);
        uploadArea.addEventListener('drop', handleDrop);
        tabs.forEach(tab => tab.addEventListener('click', handleTabClick));
        document.addEventListener('click', () => contextMenu.style.display = 'none');
        allFilesList.addEventListener('contextmenu', handleContextMenu);
        archivedFilesList.addEventListener('contextmenu', handleContextMenu);
        archivedFoldersList.addEventListener('contextmenu', handleContextMenu);
        contextMenu.addEventListener('click', handleContextAction);
        uploadFilesBtn.addEventListener('click', () => fileInput.click());
        createFolderFilesBtn.addEventListener('click', handleCreateFolder);
        uploadFirstFileBtn?.addEventListener('click', () => fileInput.click());

        // Initialize
        updateStorageInfo();
        renderRecentFolders();
        renderRecentFiles();
    </script>
</body>
</html>